{"version":3,"sources":["redux/dialogs-reducer.js","assets/images/user.png","assets/images/upload.svg","hoc/WithAuthRedirect.js","api/api.js","components/Navbar/Navbar.module.css","components/Navbar/Navbar.jsx","components/Settings/Settings.jsx","components/News/News.jsx","components/Music/Music.jsx","components/Users/Users.jsx","redux/users-reducer.js","redux/users-selectors.js","components/Users/UsersContainer.jsx","components/Header/Header.jsx","redux/auth-reducer.js","components/Header/HeaderContainer.jsx","components/Login/Login.jsx","redux/app-reducer.js","hoc/WithSuspense.js","App.js","redux/sidebar-reducer.js","redux/redux-store.js","index.js","components/common/Preloader/Preloader.js","components/common/FormsControls/FormsControls.module.css","components/common/FormsControls/FormsControls.js","api/utils/validators.js","components/Users/users.module.css","components/Header/Header.module.css","redux/profile-reducer.js"],"names":["initialState","dialogs","id","name","messages","message","sendMessageCreator","newMessageBody","type","dialogsReducer","state","action","body","module","exports","mapStateToPropsForRedirect","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","instance","axios","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","follow","userId","post","unfollow","delete","getProfile","console","warn","profileAPI","getStatus","updateStatus","status","put","authAPI","me","login","email","password","rememberMe","logout","Navbar","className","s","nav","item","activeClassName","active","Settings","News","Music","Users","pagesCount","Math","ceil","totalUsersCount","pages","i","push","map","p","styles","selectedPage","onClick","e","onPageChanged","users","u","key","src","photos","small","userPhoto","followed","disabled","followingInProgress","some","fullName","isFetching","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","dispatch","apiMethod","actionCreator","a","resultCode","usersReducer","count","filter","getAllUsers","usersPage","getPageSize","createSelector","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","pageNumber","Preloader","compose","bind","page","items","totalCount","Header","header","loginBlock","setAuthUserData","userid","payload","getAuthUserData","authReducer","HeaderContainer","LoginReduxForm","reduxForm","form","handleSubmit","error","onSubmit","Field","placeholder","component","Input","validate","required","style","formSummaryError","length","stopSubmit","_error","formData","initialized","appReducer","withSuspense","Suspense","fallback","DialogsContainer","lazy","ProfileContainer","App","initializeApp","path","render","withRouter","app","promise","Promise","all","sidebarReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","sidebar","formReducer","store","createStore","applyMiddleware","thunkMiddleware","window","ReactDOM","StrictMode","document","getElementById","preloader","FormControl","input","meta","child","hasError","touched","formControl","children","Textarea","restProps","value","maxLengthCreator","maxLength","posts","likesCount","profile","addPostActionCreator","newPostText","setStatus","getUserProfile","newPost"],"mappings":"mKAEIA,EAAe,CAClBC,QAAS,CACR,CAAEC,GAAI,EAAGC,KAAM,WACf,CAAED,GAAI,EAAGC,KAAM,QACf,CAAED,GAAI,EAAGC,KAAM,SACf,CAAED,GAAI,EAAGC,KAAM,QACf,CAAED,GAAI,EAAGC,KAAM,UACf,CAAED,GAAI,EAAGC,KAAM,YAEhBC,SAAU,CACT,CAAEF,GAAI,EAAGG,QAAS,MAClB,CAAEH,GAAI,EAAGG,QAAS,gBAClB,CAAEH,GAAI,EAAGG,QAAS,QAkBPC,EAAqB,SAACC,GAAD,MAAqB,CAAEC,KAhCpC,eAgCwDD,mBAE9DE,IAhBQ,WAAmC,IAAlCC,EAAiC,uDAAzBV,EAAcW,EAAW,uCACxD,OAAQA,EAAOH,MACd,IApBmB,eAqBlB,IAAII,EAAOD,EAAOJ,eAClB,OAAO,2BACHG,GADJ,IAECN,SAAS,GAAD,mBAAMM,EAAMN,UAAZ,CAAsB,CAACF,GAAI,EAAGG,QAASO,OAGjD,QACC,OAAOF,K,oBC5BVG,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,oC,uICIvCC,EAA6B,SAACL,GAAD,MAAY,CAC5CM,OAAQN,EAAMO,KAAKD,SAGPE,EAAmB,SAACC,GAAe,IAEzCC,EAFwC,uKAI5C,OAAKC,KAAKC,MAAMN,OAET,kBAACG,EAAcE,KAAKC,OAFI,kBAAC,IAAD,CAAUC,GAAG,eAJA,GAEdC,IAAML,WAUtC,OAFqCM,YAAQV,EAARU,CAAoCL,K,gCClB1E,mHAEMM,EAAWC,SAAa,CAC7BC,iBAAiB,EACjBC,QAAS,gDACTC,QAAS,CACR,UAAW,0CAIAC,EAAW,CACvBC,SADuB,WACmB,IAAjCC,EAAgC,uDAAlB,EAAGC,EAAe,uDAAJ,GACpC,OAAOR,EAASS,IAAT,qBAA2BF,EAA3B,kBAAgDC,IACrDE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAE7BC,OALuB,SAKhBC,GACN,OAAOd,EAASe,KAAT,iBAAwBD,KAEhCE,SARuB,SAQdF,GACR,OAAOd,EAASiB,OAAT,iBAA0BH,KAElCI,WAXuB,SAWZJ,GAEV,OADAK,QAAQC,KAAK,6CACNC,EAAWH,WAAWJ,KAIlBO,EAAa,CACzBH,WADyB,SACdJ,GACV,OAAOd,EAASS,IAAI,WAAaK,IAElCQ,UAJyB,SAIfR,GACT,OAAOd,EAASS,IAAI,kBAAoBK,IAEzCS,aAPyB,SAOZC,GACZ,OAAOxB,EAASyB,IAAT,iBAA+B,CAACD,OAAQA,MAIpCE,EAAU,CACtBC,GADsB,WAErB,OAAO3B,EAASS,IAAT,YAERmB,MAJsB,SAIhBC,EAAOC,GAA+B,IAArBC,EAAoB,wDAC1C,OAAO/B,EAASe,KAAT,aAA4B,CAAEc,QAAOC,WAAUC,gBAEvDC,OAPsB,WAQrB,OAAOhC,EAASiB,OAAT,iB,mBC9CT9B,EAAOC,QAAU,CAAC,IAAM,oBAAoB,KAAO,qBAAqB,OAAS,yB,4SC0BlE6C,EAvBA,WACd,OAAO,yBAAKC,UAAWC,IAAEC,KACxB,yBAAKF,UAAWC,IAAEE,MACjB,kBAAC,IAAD,CAASxC,GAAG,WAAWyC,gBAAiBH,IAAEI,QAA1C,YAED,yBAAKL,UAAWC,IAAEE,MACjB,kBAAC,IAAD,CAASxC,GAAG,WAAWyC,gBAAiBH,IAAEI,QAA1C,aAED,yBAAKL,UAAWC,IAAEE,MACjB,kBAAC,IAAD,CAASxC,GAAG,SAASyC,gBAAiBH,IAAEI,QAAxC,UAED,yBAAKL,UAAWC,IAAEE,MACjB,kBAAC,IAAD,CAASxC,GAAG,QAAQyC,gBAAiBH,IAAEI,QAAvC,SAED,yBAAKL,UAAWC,IAAEE,MACjB,kBAAC,IAAD,CAASxC,GAAG,SAASyC,gBAAiBH,IAAEI,QAAxC,UAED,yBAAKL,UAAWC,IAAEE,MACjB,kBAAC,IAAD,CAASxC,GAAG,YAAYyC,gBAAiBH,IAAEI,QAA3C,e,QCXYC,G,OARE,SAAC5C,GACjB,OACC,2CCMa6C,G,OARF,SAAC7C,GACb,OACC,uCCMa8C,G,OARD,SAAC9C,GACd,OACC,wC,mCCmDa+C,EAnDH,SAAC/C,GAKZ,IAHA,IAAIgD,EAAaC,KAAKC,KAAKlD,EAAMmD,gBAAkBnD,EAAMY,UAErDwC,EAAQ,GACHC,EAAI,EAAGA,GAAKL,EAAYK,IAChCD,EAAME,KAAKD,GAKZ,OAAO,6BACN,6BACED,EAAMG,KAAI,SAAAC,GACV,OAAO,0BAAMlB,UAAWtC,EAAMW,cAAgB6C,GAAKC,IAAOC,aACzDC,QAAS,SAACC,GACT5D,EAAM6D,cAAcL,KACjBA,OAINxD,EAAM8D,MAAMP,KAAI,SAAAQ,GAAC,OAAI,yBAAKC,IAAKD,EAAEnF,IAChC,8BACC,6BACC,kBAAC,IAAD,CAASqB,GAAK,YAAc8D,EAAEnF,IAC7B,yBAAKqF,IAAuB,MAAlBF,EAAEG,OAAOC,MAAgBJ,EAAEG,OAAOC,MAAQC,IAAW9B,UAAWmB,IAAOW,cAGnF,6BACEL,EAAEM,SACA,4BAAQC,SAAUtE,EAAMuE,oBAAoBC,MAAK,SAAA5F,GAAE,OAAIA,IAAOmF,EAAEnF,MAAK+E,QAAS,WAAQ3D,EAAMoB,SAAS2C,EAAEnF,MAAvG,YAEA,4BAAQ0F,SAAUtE,EAAMuE,oBAAoBC,MAAK,SAAA5F,GAAE,OAAIA,IAAOmF,EAAEnF,MAAK+E,QAAS,WAAQ3D,EAAMiB,OAAO8C,EAAEnF,MAArG,YAIL,8BACC,8BACC,6BAAMmF,EAAEU,UACR,6BAAMV,EAAEnC,SAET,8BACC,6BAAM,sBACN,6BAAM,2B,uDCtCRlD,EAAe,CAClBoF,MAAO,GACPlD,SAAU,EACVuC,gBAAiB,EACjBxC,YAAa,EACb+D,YAAY,EACZH,oBAAqB,IAkDTI,EAAgB,SAACzD,GAAD,MAAa,CAAEhC,KAhE7B,SAgE2CgC,WAC7C0D,EAAkB,SAAC1D,GAAD,MAAa,CAAEhC,KAhE7B,WAgE6CgC,WAEjD2D,EAAiB,SAAClE,GAAD,MAAkB,CAAEzB,KAhEzB,mBAgEiDyB,gBAE7DmE,EAAmB,SAACJ,GAAD,MAAiB,CAAExF,KAhExB,qBAgEkDwF,eAChEK,EAA0B,SAACL,EAAYxD,GAAb,MAAyB,CAAEhC,KAhE7B,+BAgEiEwF,aAAYxD,WAc5G8D,EAAkB,uCAAG,WAAOC,EAAU/D,EAAQgE,EAAWC,GAApC,SAAAC,EAAA,6DAC1BH,EAASF,GAAwB,EAAM7D,IADb,SAEHgE,EAAUhE,GAFP,OAIM,GAJN,OAIbF,KAAKqE,YACjBJ,EAASE,EAAcjE,IAExB+D,EAASF,GAAwB,EAAO7D,IAPd,2CAAH,4DAsBToE,EAzFM,WAAmC,IAAlClG,EAAiC,uDAAzBV,EAAcW,EAAW,uCACtD,OAAQA,EAAOH,MACd,IAnBa,SAoBZ,OAAO,2BACHE,GADJ,IAEC0E,MAAO1E,EAAM0E,MAAMP,KAAI,SAAAQ,GACtB,OAAIA,EAAEnF,KAAOS,EAAO6B,OACZ,2BAAK6C,GAAZ,IAAeM,UAAU,IAEnBN,OAGV,IA5Be,WA6Bd,OAAO,2BACH3E,GADJ,IAEC0E,MAAO1E,EAAM0E,MAAMP,KAAI,SAAAQ,GACtB,OAAIA,EAAEnF,KAAOS,EAAO6B,OACZ,2BAAK6C,GAAZ,IAAeM,UAAU,IAEnBN,OAGV,IArCgB,YAsCf,OAAO,2BAAK3E,GAAZ,IAAmB0E,MAAOzE,EAAOyE,QAElC,IAvCuB,mBAwCtB,OAAO,2BAAK1E,GAAZ,IAAmBuB,YAAatB,EAAOsB,cAExC,IAzC4B,wBA0C3B,OAAO,2BAAKvB,GAAZ,IAAmB+D,gBAAiB9D,EAAOkG,QAE5C,IA3CyB,qBA4CxB,OAAO,2BAAKnG,GAAZ,IAAmBsF,WAAYrF,EAAOqF,aAEvC,IA7CmC,+BA8ClC,OAAO,2BACHtF,GADJ,IAECmF,oBAAqBlF,EAAOqF,WAAP,sBACdtF,EAAMmF,qBADQ,CACalF,EAAO6B,SACtC9B,EAAMmF,oBAAoBiB,QAAO,SAAA5G,GAAE,OAAIA,GAAMS,EAAO6B,YAGzD,QACC,OAAO9B,I,iCC5DGqG,EAAc,SAACrG,GAC3B,OAAOA,EAAMsG,UAAU5B,OAOX6B,GAJgBC,aAAgB,eAIlB,SAACxG,GAC3B,OAAOA,EAAMsG,UAAU9E,WAGXiF,EAAqB,SAACzG,GAClC,OAAOA,EAAMsG,UAAUvC,iBAGX2C,EAAiB,SAAC1G,GAC9B,OAAOA,EAAMsG,UAAU/E,aAGXoF,EAAgB,SAAC3G,GAC7B,OAAOA,EAAMsG,UAAUhB,YAGXsB,EAAyB,SAAC5G,GACtC,OAAOA,EAAMsG,UAAUnB,qBClBlB0B,E,4MAMLpC,cAAgB,SAACqC,GAChB,EAAKlG,MAAMU,SAASwF,I,kEAJpBnG,KAAKC,MAAMU,SAASX,KAAKC,MAAMW,YAAaZ,KAAKC,MAAMY,Y,+BAQvD,OAAO,oCACLb,KAAKC,MAAM0E,WAAa,kBAACyB,EAAA,EAAD,MAAgB,KACzC,kBAAC,EAAD,CAAQhD,gBAAiBpD,KAAKC,MAAMmD,gBAChCvC,SAAUb,KAAKC,MAAMY,SACrBD,YAAaZ,KAAKC,MAAMW,YACxBkD,cAAe9D,KAAK8D,cACpBC,MAAO/D,KAAKC,MAAM8D,MAClB7C,OAAQlB,KAAKC,MAAMiB,OACnBG,SAAUrB,KAAKC,MAAMoB,SACrBsD,WAAY3E,KAAKC,MAAM0E,WACvBH,oBAAqBxE,KAAKC,MAAMuE,2B,GArBVrE,IAAML,WAiDpBuG,cACdjG,aAZqB,SAACf,GACtB,MAAO,CACN0E,MAAO2B,EAAYrG,GACnBwB,SAAU+E,EAAYvG,GACtB+D,gBAAiB0C,EAAmBzG,GACpCuB,YAAamF,EAAe1G,GAC5BsF,WAAYqB,EAAc3G,GAC1BmF,oBAAqByB,EAAuB5G,MAKpB,CAAE6B,OFqCN,SAACC,GACtB,8CAAO,WAAO+D,GAAP,SAAAG,EAAA,sDACNJ,EAAmBC,EAAU/D,EAAQT,IAASQ,OAAOoF,KAAK5F,KAAWkE,GAD/D,2CAAP,uDEtCmCvD,SF2CZ,SAACF,GACxB,8CAAO,WAAO+D,GAAP,SAAAG,EAAA,sDACNJ,EAAmBC,EAAU/D,EAAQT,IAASW,SAASiF,KAAK5F,KAAWmE,GADjE,2CAAP,uDE5C6CC,iBAAgBE,0BAAyBrE,SFe/D,SAAC4F,EAAM1F,GAC9B,8CAAO,WAAOqE,GAAP,eAAAG,EAAA,6DACNH,EAASH,GAAiB,IAC1BG,EAASJ,EAAeyB,IAFlB,SAIa7F,IAASC,SAAS4F,EAAM1F,GAJrC,OAIAI,EAJA,OAKNiE,EAASH,GAAiB,IAC1BG,EAbkC,CAAE/F,KAhEpB,YAgEqC4E,MAanC9C,EAAKuF,QACvBtB,EAZsD,CAAE/F,KAhE5B,wBAgEyDqG,MAYzDvE,EAAKwF,aAP3B,2CAAP,yDEjBcJ,CAEbH,G,iBC5CaQ,EAZA,SAACzG,GACf,OAAO,4BAAQsC,UAAWC,IAAEmE,QAC3B,yBAAKzC,IAAI,0EAET,yBAAK3B,UAAWC,IAAEoE,YACf3G,EAAMN,OACL,6BAAMM,EAAMgC,MAAZ,MAAqB,4BAAQ2B,QAAS3D,EAAMoC,QAAvB,YACrB,kBAAC,IAAD,CAASnC,GAAI,UAAb,Y,QCNFvB,GAAe,CAClBE,GAAI,KACJqD,MAAO,KACPD,MAAO,KACPtC,QAAQ,GAeIkH,GAAkB,SAACC,EAAQ5E,EAAOD,EAAOtC,GAAvB,MAAmC,CAAER,KArB9C,gBAqBmE4H,QAAS,CAAED,SAAQ5E,QAAOD,QAAOtC,YAE7GqH,GAAkB,yDAAM,WAAO9B,GAAP,uBAAAG,EAAA,sEACftD,IAAQC,KADO,OAGH,KAF7BhB,EADgC,QAGvBC,KAAKqE,aAAmB,EACTtE,EAASC,KAAKA,KAAnCpC,EAD6B,EAC7BA,GAAIqD,EADyB,EACzBA,MAAOD,EADkB,EAClBA,MACjBiD,EAAS2B,GAAgBhI,EAAIqD,EAAOD,GAAO,KALR,2CAAN,uDA4BhBgF,GA1CK,WAAmC,IAAlC5H,EAAiC,uDAAzBV,GAAcW,EAAW,uCACrD,OAAQA,EAAOH,MACd,IAXoB,gBAYnB,OAAO,2BACHE,GACAC,EAAOyH,SAEZ,QACC,OAAO1H,ICfJ6H,G,uKAGJ,OAAO,kBAAC,EAAWlH,KAAKC,W,GAHIE,IAAML,WAYrBM,gBALS,SAACf,GAAD,MAAY,CACnCM,OAAQN,EAAMO,KAAKD,OACnBsC,MAAO5C,EAAMO,KAAKqC,SAGqB,CAACI,OD6BnB,yDAAM,WAAO6C,GAAP,SAAAG,EAAA,sEACNtD,IAAQM,SADF,OAGM,IAHN,OAGdpB,KAAKqE,YACjBJ,EAAS2B,GAAgB,KAAM,KAAM,MAAM,IAJjB,2CAAN,wDC7BPzG,CAAoC8G,I,0DCmB7CC,GAAiBC,aAAU,CAAEC,KAAM,SAAlBD,EA3BL,SAAC,GAA6B,IAA3BE,EAA0B,EAA1BA,aAAcC,EAAY,EAAZA,MAClC,OACC,0BAAMC,SAAUF,GACf,6BACC,kBAACG,GAAA,EAAD,CAAOC,YAAa,QAAS5I,KAAM,QAAS6I,UAAWC,KAAOC,SAAU,CAACC,SAE1E,6BACC,kBAACL,GAAA,EAAD,CAAOC,YAAa,WAAY5I,KAAM,WAAY6I,UAAWC,KAAOC,SAAU,CAACC,MAAW3I,KAAK,cAEhG,6BACC,kBAACsI,GAAA,EAAD,CAAO3I,KAAM,aAAc6I,UAAWC,KAAOzI,KAAM,aADpD,gBAKEoI,GAAS,yBAAKhF,UAAWwF,KAAMC,kBAC/BT,GAKF,6BACC,8CA2BWnH,gBAJS,SAACf,GAAD,MAAY,CACnCM,OAAQN,EAAMO,KAAKD,UAGoB,CAAEsC,MFtBrB,SAACC,EAAOC,EAAUC,GAAlB,8CAAiC,WAAO8C,GAAP,iBAAAG,EAAA,sEAChCtD,IAAQE,MAAMC,EAAOC,EAAUC,GADC,OAGpB,KAF7BpB,EADiD,QAGxCC,KAAKqE,WACjBJ,EAAS8B,OAELhI,EAAUgC,EAASC,KAAKlC,SAASkJ,OAAS,EAAIjH,EAASC,KAAKlC,SAAS,GAAK,aAC9EmG,EAASgD,YAAW,QAAS,CAAEC,OAAQnJ,MAPa,2CAAjC,wDEsBNoB,EAnBD,SAACH,GAKd,OAAIA,EAAMN,OACF,kBAAC,IAAD,CAAUO,GAAI,aAGf,6BACN,qCACA,kBAACiH,GAAD,CAAgBK,SAVA,SAACY,GACjBnI,EAAMgC,MAAMmG,EAASlG,MAAOkG,EAASjG,SAAUiG,EAAShG,mBClCtDzD,GAAe,CAClB0J,aAAa,GA0BCC,GAvBI,WAAmC,IAAlCjJ,EAAiC,uDAAzBV,GAAcW,EAAW,uCACpD,OAAQA,EAAOH,MACd,IAR0B,sBASzB,OAAO,2BACHE,GADJ,IAECgJ,aAAa,IAEf,QACC,OAAOhJ,ICfGkJ,GAAe,SAACzI,GAC5B,OAAO,SAACG,GACP,OAAO,kBAAC,IAAMuI,SAAP,CAAgBC,SAAU,kBAACrC,EAAA,EAAD,OAChC,kBAACtG,EAAcG,MCYZyI,GAAmBvI,IAAMwI,MAAK,kBAAM,iCACpCC,GAAmBzI,IAAMwI,MAAK,kBAAM,iCAEpCE,G,kLAGF7I,KAAKC,MAAM6I,kB,+BAIX,OAAK9I,KAAKC,MAAMoI,YAKd,yBAAK9F,UAAU,eACb,kBAAC,GAAD,MACA,kBAAC,EAAD,MACA,yBAAKA,UAAU,uBAEb,kBAAC,IAAD,CAAOwG,KAAK,WACVC,OAAQT,GAAaG,MAEvB,kBAAC,IAAD,CAAOK,KAAK,oBACVC,OAAQT,GAAaK,MAEvB,kBAAC,IAAD,CAAOG,KAAK,SACVC,OAAQ,kBAAM,kBAAC,EAAD,SAEhB,kBAAC,IAAD,CAAOD,KAAK,SACVC,OAAQ,kBAAM,kBAAC,GAAD,SAEhB,kBAAC,IAAD,CAAOD,KAAK,YAAYpB,UAAW9E,IACnC,kBAAC,IAAD,CAAOkG,KAAK,QAAQpB,UAAW7E,IAC/B,kBAAC,IAAD,CAAOiG,KAAK,SAASpB,UAAW5E,MAvB7B,kBAACqD,EAAA,EAAD,U,GARKjG,IAAML,WA0CTuG,eACb4C,IACA7I,aANsB,SAACf,GAAD,MAAY,CAClCgJ,YAAahJ,EAAM6J,IAAIb,eAKE,CAAES,cFzCA,kBAAM,SAAC5D,GACnC,IAAIiE,EAAUjE,EAAS8B,MAEvBoC,QAAQC,IAAI,CAACF,IACXpI,MAAK,WACLmE,EAPsC,CAAE/F,KAlBf,+BE2DbkH,CAEgCwC,I,SCjE3ClK,GAAe,GASJ2K,GALQ,WAAmC,IAAlCjK,EAAiC,uDAAzBV,GAE/B,OAAOU,G,8BCIJkK,GAAWC,YAAgB,CAC9BC,YAAaC,KACbC,YAAavK,KACbwK,QAASN,GACT3D,UAAWJ,EACX3F,KAAMqH,GACNI,KAAMwC,KACNX,IAAKZ,KAGFwB,GAAQC,YAAYR,GAAUS,YAAgBC,OAElDC,OAAOJ,MAAQA,GAEAA,UChBfK,IAASnB,OACR,kBAAC,IAAMoB,WAAP,KACC,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAUN,MAAOA,IAChB,kBAAC,GAAD,SAIHO,SAASC,eAAe,U,gCChBzB,sCASelE,IANC,SAACnG,GAChB,OAAO,6BACN,yBAAKiE,IAAKqG,S,mBCJZ/K,EAAOC,QAAU,CAAC,YAAc,mCAAmC,MAAQ,6BAA6B,iBAAmB,0C,iJCErH+K,EAAc,SAAC,GAAmC,EAAlCC,MAAmC,IAA5BC,EAA2B,EAA3BA,KAAgBzK,GAAW,EAArB0K,MAAqB,yCACjDC,EAAWF,EAAKG,SAAWH,EAAKnD,MACtC,OACC,yBAAKhF,UAAWmB,IAAOoH,YAAc,KAAOF,EAAWlH,IAAO6D,MAAQ,KACrE,6BACEtH,EAAM8K,UAENH,GAAY,8BAAOF,EAAKnD,SAKhByD,EAAW,SAAC/K,GAAW,IAC3BwK,EAAqCxK,EAArCwK,MAAuBQ,GAAchL,EAA9ByK,KAA8BzK,EAAxB0K,MADa,YACW1K,EADX,2BAElC,OAAO,kBAACuK,EAAgBvK,EAAO,8CAAcwK,EAAWQ,MAG5CrD,EAAQ,SAAC3H,GAAW,IACxBwK,EAAqCxK,EAArCwK,MAAuBQ,GAAchL,EAA9ByK,KAA8BzK,EAAxB0K,MADU,YACc1K,EADd,2BAE/B,OAAO,kBAACuK,EAAgBvK,EAAO,2CAAWwK,EAAWQ,O,gCCtBtD,oEAAO,IAAMnD,EAAW,SAAAoD,GACvB,IAAIA,EACJ,MAAO,qBAGKC,EAAmB,SAACC,GAAD,OAAe,SAACF,GAC/C,GAAIA,EAAMjD,OAASmD,EAAW,MAAM,iBAAN,OAAwBA,EAAxB,e,mBCL/B5L,EAAOC,QAAU,CAAC,UAAY,yBAAyB,aAAe,8B,mBCAtED,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,6B,2NCK3Dd,EAAe,CAClB0M,MAAO,CACN,CAAExM,GAAI,EAAGG,QAAS,uBAAwBsM,WAAY,IACtD,CAAEzM,GAAI,EAAGG,QAAS,qBAAsBsM,WAAY,IACpD,CAAEzM,GAAI,EAAGG,QAAS,SAAUsM,WAAY,IACxC,CAAEzM,GAAI,EAAGG,QAAS,OAAQsM,WAAY,KAEvCC,QAAS,KACT1J,OAAQ,IA+BI2J,EAAuB,SAACC,GAAD,MAAkB,CAAEtM,KA3CvC,WA2CuDsM,gBAE3DC,EAAY,SAAC7J,GAAD,MAAa,CAAE1C,KA3CrB,aA2CuC0C,WAE7C8J,EAAiB,SAACxK,GAAD,8CAAY,WAAO+D,GAAP,eAAAG,EAAA,sEAClB3E,IAASa,WAAWJ,GADF,OACnCH,EADmC,OAEzCkE,EAL2C,CAAE/F,KA3CrB,mBA2C6CoM,QAK7CvK,EAASC,OAFQ,2CAAZ,uDAKjBU,EAAY,SAACR,GAAD,8CAAY,WAAO+D,GAAP,eAAAG,EAAA,sEACb3D,IAAWC,UAAUR,GADR,OAC9BH,EAD8B,OAEpCkE,EAASwG,EAAU1K,EAASC,OAFQ,2CAAZ,uDAKZW,EAAe,SAACC,GAAD,8CAAY,WAAOqD,GAAP,SAAAG,EAAA,sEAChB3D,IAAWE,aAAaC,GADR,OAEN,IAFM,OAE1BZ,KAAKqE,YACjBJ,EAASwG,EAAU7J,IAHmB,2CAAZ,uDAOb6H,IAjDQ,WAAmC,IAAlCrK,EAAiC,uDAAzBV,EAAcW,EAAW,uCACxD,OAAQA,EAAOH,MACd,IAjBe,WAkBd,IAAIyM,EAAU,CACb/M,GAAI,EACJG,QAASM,EAAOmM,YAChBH,WAAY,GAEb,OAAO,2BACHjM,GADJ,IAECgM,MAAM,GAAD,mBAAMhM,EAAMgM,OAAZ,CAAmBO,IACxBH,YAAa,KAGf,IA3BiB,aA4BhB,OAAO,2BACHpM,GADJ,IAECwC,OAAQvC,EAAOuC,SAGjB,IAlCuB,mBAmCtB,OAAO,2BAAKxC,GAAZ,IAAmBkM,QAASjM,EAAOiM,UAEpC,QACC,OAAOlM,M","file":"static/js/main.421bdf0a.chunk.js","sourcesContent":["const SEND_MESSAGE = 'SEND_MESSAGE';\r\n\r\nlet initialState = {\r\n\tdialogs: [\r\n\t\t{ id: 1, name: 'Mikhail' },\r\n\t\t{ id: 2, name: 'Oleg' },\r\n\t\t{ id: 3, name: 'Naska' },\r\n\t\t{ id: 4, name: 'Ivan' },\r\n\t\t{ id: 5, name: 'Marina' },\r\n\t\t{ id: 6, name: 'Kostyan' }\r\n\t],\r\n\tmessages: [\r\n\t\t{ id: 1, message: 'Hi' },\r\n\t\t{ id: 2, message: 'How are you?' },\r\n\t\t{ id: 3, message: 'YO' }\r\n\t],\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SEND_MESSAGE:\r\n\t\t\tlet body = action.newMessageBody;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessages: [...state.messages, {id: 6, message: body}]\r\n\t\t\t};\r\n\t\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const sendMessageCreator = (newMessageBody) => ({ type: SEND_MESSAGE, newMessageBody })\r\n\r\nexport default dialogsReducer;","module.exports = __webpack_public_path__ + \"static/media/user.600a2c96.png\";","module.exports = __webpack_public_path__ + \"static/media/upload.83f256d8.svg\";","import { Redirect } from \"react-router-dom\"\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n\tisAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n\r\n\tclass RedirectComponent extends React.Component {\r\n\t\trender() {\r\n\t\t\tif (!this.props.isAuth) return <Redirect to='/login' />\r\n\r\n\t\t\treturn <Component {...this.props} />\r\n\t\t}\r\n\t}\r\n\r\n\tlet ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n\treturn ConnectedAuthRedirectComponent;\r\n}","import * as axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n\twithCredentials: true,\r\n\tbaseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n\theaders: {\r\n\t\t\"API-KEY\": \"a1deb2e2-7c97-4c64-b5cf-ee0c51f46b17\"\r\n\t}\r\n});\r\n\r\nexport const usersAPI = {\r\n\tgetUsers(currentPage = 1, pageSize = 10) {\r\n\t\treturn instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n\t\t\t.then(response => response.data)\r\n\t},\r\n\tfollow(userId) {\r\n\t\treturn instance.post(`follow/${userId}`)\r\n\t},\r\n\tunfollow(userId) {\r\n\t\treturn instance.delete(`follow/${userId}`)\r\n\t},\r\n\tgetProfile(userId) {\r\n\t\tconsole.warn('Obsolete method. Please profileAPI object');\r\n\t\treturn profileAPI.getProfile(userId);\r\n\t}\r\n};\r\n\r\nexport const profileAPI = {\r\n\tgetProfile(userId) {\r\n\t\treturn instance.get(`profile/` + userId);\r\n\t},\r\n\tgetStatus(userId) {\r\n\t\treturn instance.get(`profile/status/` + userId);\r\n\t},\r\n\tupdateStatus(status) {\r\n\t\treturn instance.put(`profile/status`, {status: status});\r\n\t}\r\n};\r\n\r\nexport const authAPI = {\r\n\tme() {\r\n\t\treturn instance.get(`auth/me`);\r\n\t},\r\n\tlogin(email, password, rememberMe = false) {\r\n\t\treturn instance.post(`auth/login`, { email, password, rememberMe });\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete(`auth/login`);\r\n\t},\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__2b18b\",\"item\":\"Navbar_item__2cdAN\",\"active\":\"Navbar_active__1TVoX\"};","import React from 'react';\r\nimport s from './Navbar.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Navbar = () => {\r\n\treturn <nav className={s.nav}>\r\n\t\t<div className={s.item}>\r\n\t\t\t<NavLink to=\"/profile\" activeClassName={s.active}>Profile</NavLink>\r\n\t\t</div>\r\n\t\t<div className={s.item}>\r\n\t\t\t<NavLink to=\"/dialogs\" activeClassName={s.active}>Messages</NavLink>\r\n\t\t</div>\r\n\t\t<div className={s.item}>\r\n\t\t\t<NavLink to=\"/users\" activeClassName={s.active}>Users</NavLink>\r\n\t\t</div>\r\n\t\t<div className={s.item}>\r\n\t\t\t<NavLink to=\"/news\" activeClassName={s.active}>News</NavLink>\r\n\t\t</div>\r\n\t\t<div className={s.item}>\r\n\t\t\t<NavLink to=\"/music\" activeClassName={s.active}>Music</NavLink>\r\n\t\t</div>\r\n\t\t<div className={s.item}>\r\n\t\t\t<NavLink to=\"/settings\" activeClassName={s.active}>Settings</NavLink>\r\n\t\t</div>\r\n\t</nav>;\r\n}\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport s from './Settings.module.css';\r\n\r\nconst Settings = (props) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tSettings\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport s from './News.module.css';\r\n\r\nconst News = (props) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tNews\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default News;","import React from 'react';\r\nimport s from './Music.module.css';\r\n\r\nconst Music = (props) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tMusic\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Music;","import React from 'react';\r\nimport styles from './users.module.css';\r\nimport userPhoto from '../../assets/images/user.png';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nlet Users = (props) => {\r\n\r\n\tlet pagesCount = Math.ceil(props.totalUsersCount / props.pageSize);\r\n\r\n\tlet pages = [];\r\n\tfor (let i = 1; i <= pagesCount; i++) {\r\n\t\tpages.push(i);\r\n\t}\r\n\r\n\r\n\r\n\treturn <div>\r\n\t\t<div>\r\n\t\t\t{pages.map(p => {\r\n\t\t\t\treturn <span className={props.currentPage === p && styles.selectedPage}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\tprops.onPageChanged(p);\r\n\t\t\t\t\t}}>{p}</span>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t\t{\r\n\t\t\tprops.users.map(u => <div key={u.id}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<NavLink to={ '/profile/' + u.id }>\r\n\t\t\t\t\t\t\t<img src={u.photos.small != null ? u.photos.small : userPhoto} className={styles.userPhoto} />\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{u.followed\r\n\t\t\t\t\t\t\t? <button disabled={props.followingInProgress.some(id => id === u.id)} onClick={() => { props.unfollow(u.id) }}>\r\n\t\t\t\t\t\t\t\tUnfollow</button>\r\n\t\t\t\t\t\t\t: <button disabled={props.followingInProgress.some(id => id === u.id)} onClick={() => { props.follow(u.id) }}>\r\n\t\t\t\t\t\t\t\tFollow</button>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<div>{u.fullName}</div>\r\n\t\t\t\t\t\t<div>{u.status}</div>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<div>{\"u.location.country\"}</div>\r\n\t\t\t\t\t\t<div>{\"u.location.city\"}</div>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>)\r\n\t\t}\r\n\t</div>\r\n}\r\n\r\nexport default Users;","import { usersAPI } from \"../api/api\";\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET_USERS';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\nlet initialState = {\r\n\tusers: [],\r\n\tpageSize: 5,\r\n\ttotalUsersCount: 0,\r\n\tcurrentPage: 1,\r\n\tisFetching: false,\r\n\tfollowingInProgress: [],\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map(u => {\r\n\t\t\t\t\tif (u.id === action.userId) {\r\n\t\t\t\t\t\treturn { ...u, followed: true }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\tcase UNFOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map(u => {\r\n\t\t\t\t\tif (u.id === action.userId) {\r\n\t\t\t\t\t\treturn { ...u, followed: false }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\tcase SET_USERS: {\r\n\t\t\treturn { ...state, users: action.users }\r\n\t\t}\r\n\t\tcase SET_CURRENT_PAGE: {\r\n\t\t\treturn { ...state, currentPage: action.currentPage }\r\n\t\t}\r\n\t\tcase SET_TOTAL_USERS_COUNT: {\r\n\t\t\treturn { ...state, totalUsersCount: action.count }\r\n\t\t}\r\n\t\tcase TOGGLE_IS_FETCHING: {\r\n\t\t\treturn { ...state, isFetching: action.isFetching }\r\n\t\t}\r\n\t\tcase TOGGLE_IS_FOLLOWING_PROGRESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tfollowingInProgress: action.isFetching\r\n\t\t\t\t\t? [...state.followingInProgress, action.userId]\r\n\t\t\t\t\t: state.followingInProgress.filter(id => id != action.userId)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const followSuccess = (userId) => ({ type: FOLLOW, userId });\r\nexport const unfollowSuccess = (userId) => ({ type: UNFOLLOW, userId });\r\nexport const setUsers = (users) => ({ type: SET_USERS, users });\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, currentPage });\r\nexport const setTotalUsersCount = (totalUsersCount) => ({ type: SET_TOTAL_USERS_COUNT, count: totalUsersCount });\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, isFetching });\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({ type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId });\r\n\r\nexport const getUsers = (page, pageSize) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(toggleIsFetching(true));\r\n\t\tdispatch(setCurrentPage(page));\r\n\r\n\t\tconst data = await usersAPI.getUsers(page, pageSize);\r\n\t\tdispatch(toggleIsFetching(false));\r\n\t\tdispatch(setUsers(data.items));\r\n\t\tdispatch(setTotalUsersCount(data.totalCount));\r\n\t}\r\n};\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n\tdispatch(toggleFollowingProgress(true, userId));\r\n\tconst response = await apiMethod(userId);\r\n\r\n\tif (response.data.resultCode == 0) {\r\n\t\tdispatch(actionCreator(userId));\r\n\t};\r\n\tdispatch(toggleFollowingProgress(false, userId));\r\n}\r\n\r\nexport const follow = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tfollowUnfollowFlow(dispatch, userId, usersAPI.follow.bind(usersAPI), followSuccess);\r\n\t}\r\n};\r\n\r\nexport const unfollow = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tfollowUnfollowFlow(dispatch, userId, usersAPI.unfollow.bind(usersAPI), unfollowSuccess);\r\n\t}\r\n};\r\n\r\nexport default usersReducer;","import {createSelector} from \"reselect\";\r\n\r\nexport const getAllUsers = (state) => {\r\n\treturn state.usersPage.users;\r\n}\r\n\r\nexport const getUsersSuper = createSelector( () => {\r\n\t\r\n})\r\n\r\nexport const getPageSize = (state) => {\r\n\treturn state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n\treturn state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n\treturn state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n\treturn state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n\treturn state.usersPage.followingInProgress;\r\n}","import React from 'react';\r\nimport Users from './Users';\r\nimport { connect } from 'react-redux';\r\nimport { follow, unfollow, setCurrentPage, toggleFollowingProgress, getUsers } from '../../redux/users-reducer';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport { withAuthRedirect } from '../../hoc/WithAuthRedirect';\r\nimport { compose } from 'redux';\r\nimport { getPageSize, getAllUsers, getTotalUsersCount, getCurrentPage, getIsFetching, getFollowingInProgress } from '../../redux/users-selectors';\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n\t}\r\n\r\n\tonPageChanged = (pageNumber) => {\r\n\t\tthis.props.getUsers(pageNumber);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <>\r\n\t\t\t{this.props.isFetching ? <Preloader /> : null}\r\n\t\t\t<Users \ttotalUsersCount={this.props.totalUsersCount}\r\n\t\t\t\t\t\t\tpageSize={this.props.pageSize}\r\n\t\t\t\t\t\t\tcurrentPage={this.props.currentPage}\r\n\t\t\t\t\t\t\tonPageChanged={this.onPageChanged}\r\n\t\t\t\t\t\t\tusers={this.props.users}\r\n\t\t\t\t\t\t\tfollow={this.props.follow}\r\n\t\t\t\t\t\t\tunfollow={this.props.unfollow}\r\n\t\t\t\t\t\t\tisFetching={this.props.isFetching}\r\n\t\t\t\t\t\t\tfollowingInProgress={this.props.followingInProgress}\r\n\t\t\t/>\r\n\t\t</>\r\n\t}\r\n}\r\n\r\n// let mapStateToProps = (state) => {\r\n// \treturn {\r\n// \t\tusers: state.usersPage.users,\r\n// \t\tpageSize: state.usersPage.pageSize,\r\n// \t\ttotalUsersCount: state.usersPage.totalUsersCount,\r\n// \t\tcurrentPage: state.usersPage.currentPage,\r\n// \t\tisFetching: state.usersPage.isFetching,\r\n// \t\tfollowingInProgress: state.usersPage.followingInProgress\r\n// \t}\r\n// }\r\n\r\nlet mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tusers: getAllUsers(state),\r\n\t\tpageSize: getPageSize(state),\r\n\t\ttotalUsersCount: getTotalUsersCount(state),\r\n\t\tcurrentPage: getCurrentPage(state),\r\n\t\tisFetching: getIsFetching(state),\r\n\t\tfollowingInProgress: getFollowingInProgress(state)\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, { follow, unfollow, setCurrentPage, toggleFollowingProgress, getUsers })\r\n)(UsersContainer)","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Header.module.css';\r\n\r\nconst Header = (props) => {\r\n\treturn <header className={s.header}>\r\n\t\t<img src=\"https://upload.wikimedia.org/wikipedia/commons/f/f3/RKN_site_logo.png\" />\r\n\r\n\t\t<div className={s.loginBlock}>\r\n\t\t\t{ props.isAuth\r\n\t\t\t\t? <div>{props.login} - <button onClick={props.logout}>Log out</button></div> \r\n\t\t\t : <NavLink to={'/login'}>Login</NavLink> }\r\n\t\t</div>\r\n\t</header>\r\n}\r\n\r\nexport default Header;","import { stopSubmit } from \"redux-form\";\r\nimport { authAPI } from \"../api/api\";\r\n\r\nconst SET_USER_DATA = 'SET_USER_DATA';\r\n\r\nlet initialState = {\r\n\tid: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USER_DATA:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const setAuthUserData = (userid, email, login, isAuth) => ({ type: SET_USER_DATA, payload: { userid, email, login, isAuth } });\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n\tlet response = await authAPI.me();\r\n\r\n\tif (response.data.resultCode === 0) {\r\n\t\tlet { id, email, login } = response.data.data;\r\n\t\tdispatch(setAuthUserData(id, email, login, true));\r\n\t};\r\n};\r\n\r\nexport const login = (email, password, rememberMe) => async (dispatch) => {\r\n\tlet response = await authAPI.login(email, password, rememberMe);\r\n\t\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(getAuthUserData());\r\n\t} else {\r\n\t\tlet message = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n\t\tdispatch(stopSubmit(\"login\", { _error: message }));\r\n\t}\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n\tlet response = await authAPI.logout();\r\n\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(setAuthUserData(null, null, null, false));\r\n\t}\r\n};\r\n\r\nexport default authReducer;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Header from './Header';\r\nimport { logout } from '../../redux/auth-reducer';\r\n\r\nclass HeaderContainer extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn <Header {...this.props} />\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuth: state.auth.isAuth,\r\n\tlogin: state.auth.login\r\n});\r\n\r\nexport default connect(mapStateToProps, {logout}) (HeaderContainer);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { required } from '../../api/utils/validators';\r\nimport { Input } from '../common/FormsControls/FormsControls';\r\nimport { login } from '../../redux/auth-reducer';\r\nimport { Redirect } from 'react-router-dom';\r\nimport style from './../common/FormsControls/FormsControls.module.css';\r\n\r\nconst LoginForm = ({ handleSubmit, error }) => {\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t<div>\r\n\t\t\t\t<Field placeholder={\"Email\"} name={\"email\"} component={Input} validate={[required]} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Field placeholder={\"Password\"} name={\"password\"} component={Input} validate={[required]} type=\"password\" />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Field name={\"rememberMe\"} component={Input} type={\"checkbox\"} /> remember me\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* { props.error && */}\r\n\t\t\t{ error && <div className={style.formSummaryError}>\r\n\t\t\t\t{error}\r\n\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{/* } */}\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<button>Login</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({ form: 'Login' })(LoginForm)\r\n\r\nconst Login = (props) => {\r\n\tconst onSubmit = (formData) => {\r\n\t\tprops.login(formData.email, formData.password, formData.rememberMe);\r\n\t}\r\n\r\n\tif (props.isAuth) {\r\n\t\treturn <Redirect to={\"/profile\"} />\r\n\t}\r\n\r\n\treturn <div>\r\n\t\t<h1>Login</h1>\r\n\t\t<LoginReduxForm onSubmit={onSubmit} />\r\n\t</div>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, { login })(Login);","import { stopSubmit } from \"redux-form\";\r\nimport { authAPI } from \"../api/api\";\r\nimport { getAuthUserData } from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\nlet initialState = {\r\n\tinitialized: false,\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase INITIALIZED_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinitialized: true\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const initializedSuccess = () => ({ type: INITIALIZED_SUCCESS });\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n\tlet promise = dispatch(getAuthUserData());\r\n\t\r\n\tPromise.all([promise])\r\n\t\t.then(() => {\r\n\t\t\tdispatch(initializedSuccess());\r\n\t\t});\r\n};\r\n\r\nexport default appReducer;","import React from \"react\";\r\nimport Preloader from \"../components/common/Preloader/Preloader\";\r\n\r\nexport const withSuspense = (Component) => {\r\n\treturn (props) => {\r\n\t\treturn <React.Suspense fallback={<Preloader />}>\r\n\t\t\t<Component {...props} />\r\n\t\t</React.Suspense>\r\n\t};\t\r\n}","import React, { Suspense } from 'react';\nimport './App.css';\nimport Navbar from './components/Navbar/Navbar';\nimport { Route, withRouter } from 'react-router-dom';\nimport Settings from './components/Settings/Settings';\nimport News from './components/News/News';\nimport Music from './components/Music/Music';\n// import DialogsContainer from './components/Dialogs/DialogsContainer';\nimport UsersContainer from './components/Users/UsersContainer';\n// import ProfileContainer from './components/Profile/ProfileContainer';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport LoginPage from './components/Login/Login';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { initializeApp } from './redux/app-reducer';\nimport Preloader from './components/common/Preloader/Preloader';\nimport { withSuspense } from './hoc/WithSuspense';\n\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\n\nclass App extends React.Component {\n\n  componentDidMount() {\n    this.props.initializeApp();\n  }\n\n  render() {\n    if (!this.props.initialized) {\n      return <Preloader />\n    }\n\n    return (\n      <div className=\"app-wrapper\">\n        <HeaderContainer />\n        <Navbar />\n        <div className=\"app-wrapper-content\">\n\n          <Route path=\"/dialogs\"\n            render={withSuspense(DialogsContainer)} />\n\n          <Route path=\"/profile/:userId?\"\n            render={withSuspense(ProfileContainer)} />\n\n          <Route path=\"/users\"\n            render={() => <UsersContainer />} />\n\n          <Route path=\"/login\"\n            render={() => <LoginPage />} />\n\n          <Route path=\"/settings\" component={Settings} />\n          <Route path=\"/news\" component={News} />\n          <Route path=\"/music\" component={Music} />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  initialized: state.app.initialized\n});\n\nexport default compose(\n  withRouter,\n  connect(mapStateToProps, { initializeApp }))(App);\n","let initialState = {\r\n\t\r\n}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\t\r\n\treturn state;\r\n}\r\n\r\nexport default sidebarReducer;","import profileReducer from \"./profile-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from \"./app-reducer\";\r\nimport { createStore, combineReducers, applyMiddleware } from \"redux\";\r\n\r\nlet reducers = combineReducers({\r\n\tprofilePage: profileReducer,\r\n\tdialogsPage: dialogsReducer,\r\n\tsidebar: sidebarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tform: formReducer,\r\n\tapp: appReducer\r\n});\r\n\r\nlet store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\nwindow.store = store;\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from './redux/redux-store';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<BrowserRouter>\n\t\t\t<Provider store={store}>\n\t\t\t\t<App />\n\t\t\t</Provider>\n\t\t</BrowserRouter>\n\t</React.StrictMode >,\n\tdocument.getElementById('root')\n);","import React from 'react';\r\nimport preloader from '../../../assets/images/upload.svg';\r\n\r\nlet Preloader = (props) => {\r\n\treturn <div>\r\n\t\t<img src={preloader} />\r\n\t</div>\r\n}\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__1ypUw\",\"error\":\"FormsControls_error__1FQEC\",\"formSummaryError\":\"FormsControls_formSummaryError__6bn1h\"};","import React from \"react\";\r\nimport styles from \"./FormsControls.module.css\";\r\n\r\nconst FormControl = ({input, meta, child, ...props}) => {\r\n\tconst hasError = meta.touched && meta.error;\r\n\treturn (\r\n\t\t<div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")}>\r\n\t\t\t<div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t\t{ hasError && <span>{meta.error}</span>}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n\tconst { input, meta, child, ...restProps } = props;\r\n\treturn <FormControl {...props}><textarea {...input} {...restProps}/></FormControl>\r\n}\r\n\r\nexport const Input = (props) => {\r\n\tconst { input, meta, child, ...restProps } = props;\r\n\treturn <FormControl {...props}><input {...input} {...restProps} /></FormControl>\r\n}","export const required = value => {\r\n\tif (value) return undefined;\r\n\treturn \"Field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n\tif (value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n\treturn undefined;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"users_userPhoto__16aWX\",\"selectedPage\":\"users_selectedPage__1dBJr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1DKPt\",\"loginBlock\":\"Header_loginBlock__NhyD6\"};","import { profileAPI, usersAPI } from \"../api/api\";\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\n\r\nlet initialState = {\r\n\tposts: [\r\n\t\t{ id: 1, message: \"Hi xyu, how are you?\", likesCount: 15 },\r\n\t\t{ id: 2, message: \"it's my first post\", likesCount: 20 },\r\n\t\t{ id: 3, message: \"BlaBla\", likesCount: 12 },\r\n\t\t{ id: 4, message: \"Dada\", likesCount: 10 }\r\n\t],\r\n\tprofile: null,\r\n\tstatus: \"\"\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_POST: {\r\n\t\t\tlet newPost = {\r\n\t\t\t\tid: 5,\r\n\t\t\t\tmessage: action.newPostText,\r\n\t\t\t\tlikesCount: 0\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: [...state.posts, newPost],\r\n\t\t\t\tnewPostText: '',\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_STATUS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus: action.status\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_USER_PROFILE: {\r\n\t\t\treturn { ...state, profile: action.profile }\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const addPostActionCreator = (newPostText) => ({ type: ADD_POST, newPostText });\r\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, profile });\r\nexport const setStatus = (status) => ({ type: SET_STATUS, status });\r\n\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n\tconst response = await usersAPI.getProfile(userId);\r\n\tdispatch(setUserProfile(response.data));\r\n};\r\n\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n\tconst response = await profileAPI.getStatus(userId);\r\n\tdispatch(setStatus(response.data));\r\n};\r\n\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n\tconst response = await profileAPI.updateStatus(status);\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(setStatus(status));\r\n\t}\r\n};\r\n\r\nexport default profileReducer;"],"sourceRoot":""}